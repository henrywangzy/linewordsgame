# 移动端H5单词游戏开发模版

## 一、模版概述

基于【最小变动】原则，将移动端H5单词游戏分为**通用核心组件**和**游戏特定内容**两部分，实现快速批量生产新游戏的目标。

### 核心理念
- **一个HTML文件承载全部**：所有代码集成在单个HTML文件中，便于部署和分享
- **页面切换式架构**：多个screen页面通过切换显示，避免页面跳转
- **移动端优先设计**：所有交互和布局针对手机屏幕优化
- **教育游戏结合**：游戏化学习，寓教于乐

## 二、通用核心组件（不需要改动）

### 1. 基础框架结构
```html
<!-- 固定的HTML结构 -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>游戏名称</title>
</head>
<body>
    <div class="game-container">
        <!-- 五个基础页面 -->
        <div class="screen" id="homeScreen">...</div>
        <div class="screen" id="gameScreen">...</div>
        <div class="screen" id="gameOverScreen">...</div>
        <div class="screen" id="wordBrowseScreen">...</div>
        <div class="screen" id="vocabularyScreen">...</div>
    </div>
</body>
</html>
```

### 2. 通用CSS样式库

#### 2.1 基础重置和容器样式
```css
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

.game-container {
    width: 100%;
    max-width: 390px;
    height: 100vh;
    max-height: 844px;
    background: white;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 40px rgba(0,0,0,0.3);
}
```

#### 2.2 页面切换系统
```css
.screen {
    position: absolute;
    width: 100%;
    height: 100%;
    display: none;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.screen.active {
    display: flex;
    opacity: 1;
    pointer-events: auto;
}
```

#### 2.3 通用动画库
```css
@keyframes fadeIn { /* 淡入 */ }
@keyframes slideInUp { /* 上滑进入 */ }
@keyframes scaleIn { /* 缩放进入 */ }
@keyframes pulse { /* 脉冲效果 */ }
@keyframes shake { /* 摇晃效果 */ }
@keyframes glow { /* 发光效果 */ }
@keyframes sparkle { /* 闪烁效果 */ }
```

#### 2.4 通用按钮样式
```css
.btn { /* 基础按钮 */ }
.btn-primary { /* 主按钮 - 渐变色+发光 */ }
.btn-secondary { /* 次按钮 - 紫色系+星星 */ }
.btn-green { /* 成功按钮 - 绿色系 */ }
.btn:active { /* 按压效果 */ }
```

#### 2.5 通用卡片和列表样式
```css
.word-card { /* 单词卡片 */ }
.word-list { /* 单词列表 */ }
.stats-card { /* 统计卡片 */ }
.modal { /* 弹窗样式 */ }
```

### 3. 通用JavaScript功能

#### 3.1 页面切换管理器
```javascript
function showScreen(screenId) {
    document.querySelectorAll('.screen').forEach(s => {
        s.classList.remove('active');
    });
    document.getElementById(screenId).classList.add('active');
}
```

#### 3.2 单词朗读系统
```javascript
function speakWord(word) {
    if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(word);
        utterance.lang = 'en-US';
        utterance.rate = 0.8;
        speechSynthesis.speak(utterance);
    }
}

function speakChinese(text) {
    if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'zh-CN';
        speechSynthesis.speak(utterance);
    }
}
```

#### 3.3 数据存储管理器
```javascript
const Storage = {
    save(key, data) {
        localStorage.setItem(`game_${key}`, JSON.stringify(data));
    },
    load(key) {
        const data = localStorage.getItem(`game_${key}`);
        return data ? JSON.parse(data) : null;
    },
    clear(key) {
        localStorage.removeItem(`game_${key}`);
    }
};

// 固定的存储键
const STORAGE_KEYS = {
    HIGH_SCORE: 'highScore',
    WORD_PROGRESS: 'wordProgress',
    GAME_STATS: 'gameStats',
    SETTINGS: 'settings',
    VOCABULARY: 'vocabulary'
};
```

#### 3.4 音效管理器
```javascript
const AudioManager = {
    sounds: {},
    bgmEnabled: true,
    sfxEnabled: true,

    init() {
        // 初始化音效
    },

    playSound(name) {
        if (!this.sfxEnabled) return;
        // 播放音效
    },

    toggleBGM() {
        this.bgmEnabled = !this.bgmEnabled;
        // 切换背景音乐
    }
};
```

#### 3.5 触控和键盘输入管理
```javascript
const InputManager = {
    init() {
        // PC键盘事件
        document.addEventListener('keydown', this.handleKeyDown.bind(this));

        // 移动端触控
        this.setupTouchControls();
    },

    setupTouchControls() {
        // 触控滑动检测
        let startX, startY;

        document.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
        });

        document.addEventListener('touchend', (e) => {
            const endX = e.changedTouches[0].clientX;
            const endY = e.changedTouches[0].clientY;
            // 判断滑动方向
        });
    }
};
```

### 4. 通用UI组件

#### 4.1 首页组件（部分通用）
- Logo区域（需替换）
- 开始游戏按钮（通用）
- 单词本按钮（通用）
- 设置按钮（通用）
- 底部装饰（通用）

#### 4.2 游戏结束页组件（完全通用）
```html
<div class="game-over-content">
    <h2 class="game-over-title">游戏结束！</h2>
    <div class="score-display">
        <div class="final-score">得分: <span id="finalScore">0</span></div>
        <div class="high-score">最高分: <span id="highScore">0</span></div>
    </div>
    <div class="word-summary">
        <h3>本次学习单词</h3>
        <div id="learnedWords" class="learned-words-list"></div>
    </div>
    <div class="game-over-actions">
        <button class="btn btn-primary" onclick="restartGame()">再玩一次</button>
        <button class="btn btn-secondary" onclick="showScreen('homeScreen')">返回主页</button>
    </div>
</div>
```

#### 4.3 单词浏览页（完全通用）
```html
<div class="word-browse-container">
    <div class="browse-header">
        <button class="back-btn" onclick="showScreen('homeScreen')">返回</button>
        <h2>单词浏览</h2>
        <div class="grade-selector">
            <select id="gradeSelect" onchange="filterWordsByGrade()">
                <option value="all">全部年级</option>
                <option value="1">一年级</option>
                <option value="2">二年级</option>
                <!-- ... -->
            </select>
        </div>
    </div>
    <div class="word-grid" id="wordGrid">
        <!-- 单词卡片动态生成 -->
    </div>
</div>
```

#### 4.4 单词本页（完全通用）
```html
<div class="vocabulary-container">
    <div class="vocab-header">
        <button class="back-btn" onclick="showScreen('homeScreen')">返回</button>
        <h2>我的单词本</h2>
        <button class="clear-btn" onclick="clearVocabulary()">清空</button>
    </div>
    <div class="vocab-stats">
        <div class="stat-item">
            <span class="stat-label">已收集</span>
            <span class="stat-value" id="vocabCount">0</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">掌握度</span>
            <span class="stat-value" id="masteryRate">0%</span>
        </div>
    </div>
    <div class="vocab-list" id="vocabList">
        <!-- 单词列表动态生成 -->
    </div>
</div>
```

### 5. 单词数据库（通用结构）
```javascript
const WORD_DATABASE = [
    {
        id: 1,
        english: "apple",
        chinese: "苹果",
        phonetic: "[ˈæpl]",
        grade: 1,
        sentence: "I like to eat apples.",
        difficulty: 1
    },
    // ... 1000+ 单词数据
];
```

## 三、游戏特定内容（需要改动）

### 1. 游戏基础信息
- **游戏名称**：需要修改 `<title>` 标签
- **游戏主题色**：可选择性调整主色调
- **游戏Logo**：首页的图标或文字Logo
- **制作信息**：固定为"制作by公众号：泡泡妈学AI"（不需要修改）

### 2. 游戏核心玩法（主要改动区域）

#### 2.1 游戏画布/游戏区域
```javascript
// 这部分是游戏的核心逻辑，每个游戏都不同
class GameCore {
    constructor() {
        // 游戏特定的初始化
    }

    update() {
        // 游戏逻辑更新
    }

    render() {
        // 游戏画面渲染
    }

    checkCollision() {
        // 碰撞检测（如需要）
    }
}
```

#### 2.2 游戏特定变量
- 游戏速度控制
- 得分规则
- 难度递增逻辑
- 游戏特定的状态

#### 2.3 游戏特定UI元素
- 游戏界面的特殊显示（如赛车游戏的赛道、打字游戏的键盘等）
- 特殊的游戏控制按钮
- 游戏特定的视觉效果

### 3. 游戏说明内容
```html
<!-- 需要根据具体游戏修改 -->
<div class="game-instructions">
    <h3>游戏说明</h3>
    <p>具体的游戏玩法介绍...</p>
    <h4>操作方式</h4>
    <ul>
        <li>PC: 具体按键说明</li>
        <li>手机: 具体触控说明</li>
    </ul>
</div>
```

## 四、快速开发新游戏步骤

### 第1步：复制模板
1. 复制通用HTML模板文件
2. 修改游戏名称和主题

### 第2步：设计游戏玩法
1. 确定游戏的核心机制（如赛车、拼图等）
2. 设计得分和难度递增规则
3. 确定所需的特殊视觉元素

### 第3步：实现游戏核心
1. 在 `gameScreen` 中添加游戏特定的UI
2. 实现 `GameCore` 类的游戏逻辑
3. 添加游戏特定的控制逻辑

### 第4步：调整细节
1. 修改游戏说明文字
2. 调整游戏特定的音效
3. 优化游戏体验

### 第5步：测试和优化
1. 在不同设备上测试
2. 调整难度平衡
3. 优化性能

## 五、可扩展的游戏类型示例

基于此模板，可以快速开发以下类型的单词游戏：

### 1. 动作类
- **赛车收集**：控制赛车收集正确单词
- **打飞机**：射击包含目标单词的敌机
- **跑酷游戏**：角色跳跃收集单词

### 2. 益智类
- **消消乐**：匹配相同含义的中英文单词
- **拼图游戏**：拼出完整的单词
- **记忆翻牌**：记忆单词位置并配对

### 3. 打字类
- **打字练习**：快速输入显示的单词
- **听写游戏**：听音写单词
- **填空游戏**：补全句子中的单词

### 4. 策略类
- **单词塔防**：建造防御塔拦截错误单词
- **单词连连看**：连接相关的单词
- **单词迷宫**：通过选择正确单词找到出路

## 六、开发规范和注意事项

### 1. 代码组织
- 将CSS放在 `<style>` 标签中
- 将JavaScript放在 `<script>` 标签底部
- 保持代码结构清晰，便于后续修改

### 2. 性能优化
- 使用 `requestAnimationFrame` 进行游戏循环
- 及时清理不用的定时器和事件监听
- 控制Canvas绘制频率

### 3. 兼容性
- 确保触控和键盘都能操作
- 适配不同尺寸的手机屏幕
- 处理浏览器兼容性问题

### 4. 用户体验
- 提供清晰的操作提示
- 添加适当的音效反馈
- 保持界面简洁美观

## 七、资源和工具

### 1. 常用颜色方案
```css
/* 主题色推荐 */
--gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
--gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
--gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
--gradient-4: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
```

### 2. 图标资源
- 使用Emoji作为简单图标
- 使用CSS绘制简单图形
- Base64内嵌小图片

### 3. 音效资源
- 背景音乐：轻快的loop音乐
- 音效：点击、成功、失败、碰撞等

## 八、版本记录模板

```javascript
const GAME_VERSION = {
    name: "游戏名称",
    version: "1.0.0",
    author: "制作方",
    created: "2025-01-22",
    updated: "2025-01-22",
    features: [
        "核心游戏功能",
        "单词学习系统",
        "进度保存"
    ]
};
```

## 总结

通过这个模板，您可以：
1. **保留80%的通用代码**：页面框架、单词系统、UI组件等
2. **只修改20%的游戏逻辑**：专注于游戏玩法创新
3. **快速批量生产**：2-3小时即可完成一个新游戏
4. **保持一致体验**：所有游戏有统一的操作和视觉风格

这样既保证了开发效率，又能创造出多样化的学习游戏，真正实现了【最小变动】原则下的快速开发。