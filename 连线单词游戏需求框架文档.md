# 连线单词游戏需求框架文档

## 一、游戏概述

### 1.1 游戏基本信息
- **游戏名称**：连线单词 (Word Line)
- **游戏Slogan**：记忆路径，画出单词，点亮智慧！
- **核心玩法**：观察字母按顺序闪现的路径，凭记忆通过连线重现单词拼写
- **目标用户**：小学1-6年级学生
- **教育目标**：强化单词拼写记忆，培养专注力与空间思维能力

### 1.2 游戏特色
- 将枯燥的单词记忆变成有趣的连线游戏
- 视觉、听觉、动作三维度强化记忆
- 即时反馈机制，错误可立即重试
- 完整的单词学习系统（音标、例句、中文释义）

## 二、基于现有模板的开发方案

### 2.1 完全复用的部分（不需要修改）

#### 2.1.1 页面结构
- **首页（homeScreen）**：完全保留，只改游戏名称
- **游戏结束页（gameOverScreen）**：完全复用
- **单词浏览页（wordBrowseScreen）**：完全复用
- **单词本页（vocabularyScreen）**：完全复用

#### 2.1.2 通用功能系统
- 单词数据库系统（1200+单词，按年级分类）
- 背景音乐播放系统
- 单词朗读功能（中英文TTS）
- 页面切换动画系统
- 本地存储系统（分数、进度等）
- 游戏暂停/继续功能
- 单词例句弹窗系统

#### 2.1.3 UI组件和样式
- 所有按钮样式（btn-primary, btn-secondary, btn-green）
- 弹窗样式和动画
- 卡片样式
- 响应式布局框架
- 所有动画效果（fadeIn, slideInUp, scaleIn, pulse, shake等）

### 2.2 需要修改的部分（仅限游戏区域）

#### 2.2.1 game-config.js配置文件
```javascript
const GAME_CONFIG = {
    title: "连线单词",

    logoCards: {
        card1: { backIcon: "✏️" },  // 铅笔图标
        card2: { content: "Line", style: "color: #667eea;" },
        card3: { content: "连线", style: "color: #667eea;" }
    },

    gameHelp: {
        objective: "观察字母闪现路径，通过连线重现单词拼写",

        rules: [
            "观察阶段：仔细记住字母依次出现的位置和顺序",
            "连线阶段：从起点开始，按记忆连接格子还原单词",
            "学习阶段：成功后显示单词卡片，学习发音和例句"
        ],

        tips: [
            "集中注意力，记住路径的起点和每个转折点",
            "可以用手指在空中比划，帮助记忆路径形状",
            "连线错误会立即提示，不要怕失败，多试几次"
        ]
    }
};
```

#### 2.2.2 游戏主体区域HTML结构
只需要替换`<div class="memory-game-board">`内部的内容：

```html
<!-- 游戏主体区域 - 只修改这个div内部 -->
<div class="memory-game-board" id="memoryGameBoard">
    <!-- 连线游戏容器 -->
    <div class="line-game-container">

        <!-- 游戏状态提示栏 -->
        <div class="line-game-status">
            <div class="current-word-info">
                <span class="word-label">当前单词：</span>
                <span class="word-text" id="currentWordText">Apple</span>
                <span class="word-chinese" id="currentWordChinese">苹果</span>
            </div>
            <div class="phase-indicator" id="phaseIndicator">
                <span class="phase-icon">👀</span>
                <span class="phase-text">观察阶段</span>
            </div>
        </div>

        <!-- 连线网格区域 -->
        <div class="line-grid-wrapper">
            <svg class="line-svg" id="lineSvg">
                <!-- SVG连线将在这里动态绘制 -->
            </svg>
            <div class="line-grid" id="lineGrid">
                <!-- 6x4=24个格子将动态生成 -->
            </div>
        </div>

        <!-- 操作提示区 -->
        <div class="line-game-hint" id="gameHint">
            <span>请仔细观察字母出现的顺序...</span>
        </div>

        <!-- 重试按钮（失败时显示） -->
        <button class="retry-btn" id="retryBtn" style="display:none;">
            🔄 重新尝试
        </button>
    </div>
</div>
```

#### 2.2.3 底部统计栏内容调整
利用现有的统计栏结构，只改标签和显示内容：
- **得分**：保持不变
- **连击**：显示当前连击数
- **进度**：显示已完成/总单词数

## 三、详细游戏流程（基于您的需求描述）

### 3.1 第一阶段：动态记忆（Memorization Phase）

#### 3.1.1 开场展示
1. 屏幕顶部显示本轮单词（如"Apple"）和中文（"苹果"）
2. 系统朗读："本次挑战单词：Apple"
3. 显示6x4的空白网格

#### 3.1.2 路径生成规则
- 网格布局：4列×6行（共24个格子）
- 从随机格子开始
- 生成连续相邻路径（上下左右，不支持斜向）
- 路径长度等于单词字母数
- 路径不能重复使用同一格子
- 路径不能形成死路

#### 3.1.3 字母闪现动画
- 第1个格子亮起 → 显示"A" → 播放"噔"声 → 0.8秒后消失
- 第2个格子亮起 → 显示"p" → 播放"噔"声 → 0.8秒后消失
- 依次类推直到所有字母展示完毕
- 最后播放"瞪"声，提示进入挑战阶段

### 3.2 第二阶段：一笔连线（Drawing Phase）

#### 3.2.1 操作方式
**点击模式**（PC和移动端）：
- 点击起点格子（会高亮提示）
- 依次点击记忆中的下一个格子
- 形成连续路径

**滑动模式**（仅移动端）：
- 按住起点格子
- 手指不离开屏幕，滑动经过路径格子
- 到达终点后松开

#### 3.2.2 即时反馈
**路径正确**：
- 格子变亮并显示对应字母
- 播放悦耳的"叮"声
- 绘制连接线（渐变色）
- 连击数+1

**路径错误**：
- 格子闪红
- 播放"咚"声（错误提示音）
- 屏幕轻微震动效果
- 清除已连线路，从起点重新开始
- 连击数清零

### 3.3 第三阶段：单词卡片与反馈（Word Card & Feedback Phase）

#### 3.3.1 成功完成
1. 播放成功音效"当当当！"
2. 所有字母格子保持高亮
3. 连线发光动画效果
4. 加分动画（分数飘动效果）

#### 3.3.2 单词学习卡片
自动弹出单词卡片，包含：
- 英文单词：Apple
- 中文释义：苹果
- 音标：/ˈæpl/
- 例句：An apple a day keeps the doctor away.
- 例句翻译：每天一个苹果，医生远离我。

#### 3.3.3 继续下一轮
- 卡片显示3秒后自动收起
- 清空网格
- 加载下一个单词
- 重复游戏流程

## 四、难度设计

### 4.1 简单模式
- 网格：4×6（24格，4列6行）
- 单词长度：3-4个字母
- 闪现时间：1秒/字母
- 观察总时间：8秒
- 允许失败次数：无限

### 4.2 中等模式
- 网格：4×6（24格，4列6行）
- 单词长度：5-6个字母
- 闪现时间：0.8秒/字母
- 观察总时间：6秒
- 允许失败次数：3次

### 4.3 困难模式
- 网格：4×6（24格，4列6行）
- 单词长度：7-8个字母
- 闪现时间：0.6秒/字母
- 观察总时间：5秒
- 允许失败次数：2次
- 特殊挑战：添加干扰格子闪烁

## 五、得分机制

### 5.1 基础得分
- 每个正确单词：100分
- 难度加成：简单×1.0，中等×1.5，困难×2.0

### 5.2 额外加分
- 一次成功（无失败）：+50分
- 快速完成（<3秒）：+30分
- 连击加成：连击数×10分

### 5.3 扣分规则
- 每次失败：-10分
- 超时完成：-20分

## 六、核心功能实现要点

### 6.1 网格生成
```javascript
// 根据难度生成网格
function createGrid(difficulty) {
    const gridSizes = {
        easy: { rows: 3, cols: 4 },
        medium: { rows: 4, cols: 6 },
        hard: { rows: 5, cols: 6 }
    };
    // 动态创建格子DOM元素
}
```

### 6.2 路径生成算法
```javascript
// 使用DFS生成有效路径
function generatePath(word, gridSize) {
    // 1. 随机选择起点
    // 2. DFS搜索可行路径
    // 3. 确保路径长度等于单词长度
    // 4. 返回格子坐标数组
}
```

### 6.3 连线交互
```javascript
// 处理格子点击/触摸
function handleCellInteraction(cell) {
    // 1. 检查是否为正确的下一个格子
    // 2. 更新视觉效果
    // 3. 绘制连接线
    // 4. 检查是否完成
}
```

### 6.4 SVG连线绘制
```javascript
// 绘制平滑连接线
function drawConnection(fromCell, toCell) {
    // 使用SVG path绘制
    // 添加渐变色效果
    // 实现动画效果
}
```

## 七、视觉设计规范

### 7.1 配色方案
- 主色：继承模板紫色系（#667eea → #764ba2）
- 成功色：绿色（#4CAF50）
- 错误色：红色（#f44336）
- 格子背景：白色带阴影

### 7.2 格子样式
- 尺寸：移动端50×50px，确保可点击
- 间距：8px
- 圆角：8px
- 状态：默认/高亮/正确/错误

### 7.3 连线样式
- 线宽：3px
- 颜色：渐变（#667eea → #4CAF50）
- 动画：绘制时从起点到终点动态延伸

### 7.4 动画时长
- 格子闪现：0.8秒
- 连线绘制：0.3秒
- 错误提示：0.2秒
- 成功庆祝：1秒

## 八、音效设计

### 8.1 复用现有音效
- 背景音乐：使用模板的background.mp3
- 点击音效：使用模板的点击音
- 成功音效：使用模板的成功音

### 8.2 新增音效需求
- 字母闪现音："噔"（短促清脆）
- 连线正确音："叮"（悦耳上扬）
- 连线错误音："咚"（低沉提示）
- 挑战开始音："瞪"（高音提示）

## 九、移动端适配要点

### 9.1 布局适配
- 确保6×4网格在竖屏完整显示
- 格子大小自适应屏幕宽度
- 保留顶部状态栏和底部提示区

### 9.2 交互优化
- 格子最小点击区域：44×44px（iOS标准）
- 支持触摸滑动手势
- 防止误触（格子间距适中）

### 9.3 性能优化
- 使用CSS动画而非JS动画
- 限制同时播放的动画数量
- 及时清理不用的DOM元素

## 十、开发计划

### 第一步：修改配置文件（10分钟）
- 更新game-config.js
- 修改游戏名称和说明

### 第二步：实现游戏UI（30分钟）
- 创建网格布局
- 添加状态提示栏
- 实现格子样式

### 第三步：核心逻辑开发（60分钟）
- 路径生成算法
- 字母闪现动画
- 连线交互逻辑
- 成功/失败判定

### 第四步：视觉效果（30分钟）
- SVG连线绘制
- 动画效果
- 音效集成

### 第五步：测试优化（30分钟）
- 功能测试
- 移动端测试
- 性能优化

**预计总时长：2-3小时**

## 十一、风险控制

### 风险1：路径生成死循环
**对策**：设置最大尝试次数，失败后降低难度重试

### 风险2：移动端性能问题
**对策**：减少动画复杂度，使用GPU加速

### 风险3：屏幕太小显示不全
**对策**：动态调整格子大小，保证完整显示

## 总结

本方案完全基于现有模板开发，最大化复用已有功能：
1. **保留90%代码**：所有通用功能和页面
2. **只改游戏区**：仅修改游戏主体区域
3. **快速实现**：2-3小时完成核心功能
4. **风险可控**：技术方案成熟可靠

现在可以进入UI设计阶段，为您设计游戏界面的具体样式。